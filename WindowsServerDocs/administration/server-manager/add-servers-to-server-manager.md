---
title: Add Servers to Server Manager
description: 伺服器管理員
ms.topic: article
ms.assetid: aab895f2-fe4d-4408-b66b-cdeadbd8969e
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.localizationpriority: medium
ms.date: 02/01/2018
ms.openlocfilehash: b1c3e2f1c521615ff365642566745411db8aa612
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/07/2020
ms.locfileid: "87991938"
---
# <a name="add-servers-to-server-manager"></a>Add Servers to Server Manager

>適用於：Windows Server (半年通道)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

在 Windows Server 中，您可以使用單一的 [伺服器管理員] 主控台管理多個遠端伺服器。 您要使用伺服器管理員進行管理的伺服器，可以是執行 Windows Server 2016、Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2 或 Windows Server 2008 的伺服器。 請注意，您無法使用舊版伺服器管理員管理較新版本的 Windows Server。

本主題說明如何將伺服器新增至伺服器管理員的伺服器集區。

> [!NOTE]
> 在我們的測試中，可以使用 Windows Server 2012 及較新版 Windows Server 中的伺服器管理員，管理多達 100 部負責處理一般工作負載的伺服器。 使用單一 [伺服器管理員] 主控台所能管理的伺服器數目，依據您向受管理伺服器要求的資料量，以及可供執行伺服器管理員之電腦使用的硬體和網路資源，可能會有所不同。 當您要顯示的資料量接近該電腦的資源容量時，可能會發生伺服器管理員回應變慢，以及延遲完成重新整理的情形。 為了增加可以使用伺服器管理員所管理的伺服器數目，建議您使用 **\[設定事件資料\]** 對話方塊中的設定，限制伺服器管理員從受管理伺服器取得的事件資料。 [設定事件資料] 可以從 [事件]**** 磚中的 [工作]**** 功能表開啟。 如果您需要管理組織中的企業級伺服器數目，建議您評估[Microsoft System Center 套件](https://go.microsoft.com/fwlink/p/?LinkId=239437)中的產品。
>
> 伺服器管理員只能接收執行 Windows Server 2003 之伺服器的線上或離線狀態。 雖然您可以使用伺服器管理員在執行 Windows Server 2008 R2 或 Windows Server 2008 的伺服器上執行管理工作，但無法在執行 Windows Server 2008 R2、Windows Server 2008 或 Windows Server 2003 的伺服器上新增角色與功能。
>
> 伺服器管理員無法用來管理較新版本的 Windows Server 作業系統。 在 Windows Server 2012 R2、Windows Server 2012、Windows 8.1 或 Windows 8 上執行的伺服器管理員無法用來管理執行 Windows Server 2016 的伺服器。

本主題包含下列各節。

-   [新增要管理的伺服器](#BKMK_add)

-   [使用管理身分命令提供認證](#BKMK_creds)

## <a name="provide-credentials-with-the-manage-as-command"></a><a name=BKMK_creds></a>使用管理身分命令提供認證
當您新增遠端伺服器至伺服器管理員時，部分您新增的伺服器可能需要不同的使用者帳戶認證來存取或管理它們。 若要指定受管理伺服器的認證 (與您用來登入執行伺服器管理員之電腦的認證不同)，請在新增伺服器至伺服器管理員之後使用 **\[管理身分\]** 命令；以滑鼠右鍵按一下角色或群組首頁上 **\[伺服器\]** 磚之中的受管理伺服器項目即可存取此命令。 按一下 [管理身分]**** 會開啟 [Windows 安全性]**** 對話方塊，您可用下列其中一種格式在對話方塊中提供具有受管理伺服器存取權的使用者名稱。

-   *使用者名稱*

-   *使用者名稱*@example.domain.com

-   *網域* \\*使用者名稱*

由 **\[管理身分\]** 開啟的 **\[Windows 安全性\]** 對話方塊無法接受智慧卡認證；系統不支援透過伺服器管理員提供智慧卡認證。 系統會快取您使用 **\[管理身分\]** 命令提供給受管理伺服器的認證，而且只要您在使用您目前執行伺服器管理員所在的相同電腦來管理該伺服器，或只要您沒有為同一部伺服器指定空白或不同的認證來覆寫那些認證，系統也會加以保存。 如果您將伺服器管理員設定匯出至其他電腦，或是將網域設定檔設定為漫遊以允許伺服器管理員設定在其他電腦上使用，則不會將您伺服器集區中伺服器的 **\[管理身分\]** 認證存放在漫遊設定檔中。 伺服器管理員使用者必須將這些認證新增到他們要管理的每一部電腦。

在您依照本主題的程序新增要管理的伺服器之後，但在使用 [管理身分]**** 命令指定管理您新增的伺服器可能需要的替代認證之前，可能會顯示伺服器有下列管理性狀態錯誤：

-   Kerberos 目標解析錯誤

-   Kerbero 驗證錯誤

-   線上 - 拒絕存取

> [!NOTE]
> 不支援 [**管理**身分] 命令的角色和功能包括遠端桌面服務 (RDS) ，以及 (IPAM) 伺服器的 IP 位址管理。 如果您無法使用您執行伺服器管理員所在電腦上使用的相同認證來管理遠端 RDS 或 IPAM 伺服器，請嘗試將您通常用來管理這些遠端伺服器的帳戶新增至執行伺服器管理員所在電腦上的 Administrators 群組。 然後，使用您用來管理執行 RDS 或 IPAM 之遠端伺服器的帳戶登入正在執行伺服器管理員的電腦。

## <a name="add-servers-to-manage"></a><a name=BKMK_add></a>新增要管理的伺服器
您可以在 **\[新增伺服器\]** 對話方塊中使用下列三種方法中的任何方法，將伺服器新增至伺服器管理員以進行管理。

-   **Active Directory Domain Services**新增要管理的伺服器，Active Directory 會在與本機電腦相同的網域中找到。

-   **網域名稱系統 (DNS) 項目** 以電腦名稱或 IP 位址搜尋要管理的伺服器。

-   匯**入多部伺服器**在包含依電腦名稱稱或 IP 位址列出之伺服器的檔案中，指定要匯入的多部伺服器。

#### <a name="to-add-servers-to-the-server-pool"></a>將伺服器新增到伺服器集區

1.  如果已經開啟伺服器管理員，請移至下一個步驟。 如果尚未開啟伺服器管理員，請執行下列其中一項動作來將它開啟。

    -   在 Windows 桌面上，按一下 Windows 工作列中的 [伺服器管理員]  來啟動 [伺服器管理員]。

    -   在 Windows [**開始**] 畫面上，按一下 [伺服器管理員] 磚。

2.  在 [**管理**] 功能表上，按一下 [**新增伺服器**]。

3.  執行下列其中一項動作。

    -   在 [ **active directory** ] 索引標籤上，選取位於目前網域中的伺服器。 選取時按住 **Ctrl** 即可選取多部伺服器。 按一下向右箭號按鈕，將選取的伺服器移至 [**選取**的清單]。

    -   在 [DNS]**** 索引標籤上，輸入電腦名稱或 IP 位址的前幾個字元，然後按 **Enter** 或按一下 [搜尋]****。 選取您要新增的伺服器，然後按一下向右箭號按鈕。

    -   在 [匯**入**] 索引標籤上，流覽文字檔，其中包含您想要新增之電腦的 DNS 名稱或 ip 位址，每行一個名稱或 ip 位址。

4.  當您完成新增伺服器後，按一下 [確定]****。

### <a name="add-and-manage-servers-in-workgroups"></a>在工作群組中新增和管理伺服器
雖然將工作群組中的伺服器新增至服器管理員可能會成功，但是在新增之後，**\[伺服器\]** 磚 (在包含工作群組伺服器的角色或群組頁面上) 的 **\[管理性\]** 欄會顯示 **\[認證無效\]** 錯誤，這個錯誤會在嘗試連線至遠端工作群組伺服器或從中收集資料時發生。

下列情況可能會發生這些或類似的錯誤。

-   受管理的伺服器位於與執行伺服器管理員的電腦相同的工作群組中。

-   受管理的伺服器位於與執行伺服器管理員的電腦不同的工作群組中。

-   其中一台電腦在工作群組中，而另一台則是在網域中。

-   正在執行伺服器管理員的電腦在工作群組中，而且遠端受管理的伺服器位於不同的子網路。

-   兩台電腦都在網域中，但兩個網域之間沒有信任關係。

-   兩台電腦都在網域中，但兩個網域之間只有單向的信任關係。

-   您想要管理的伺服器已使用其 IP 位址加入了。

##### <a name="to-add-remote-workgroup-servers-to-server-manager"></a>將遠端工作群組伺服器新增到伺服器管理員

1.  在執行伺服器管理員的電腦上，將工作群組伺服器名稱新增至 **\[TrustedHosts\]** 清單。 這是 NTLM 驗證的需求。 若要將電腦新增到現有的信任主機清單，請在命令中加入 `Concatenate` 參數。 例如，若要將 `Server01` 電腦新增到現有的信任主機清單，請使用下列命令。

    ```
    Set-Item wsman:\localhost\Client\TrustedHosts Server01 -Concatenate -force
    ```

2.  判斷您要管理的工作群組伺服器是否位於與您正在執行伺服器管理員的電腦相同的子網路中。

    如果兩部電腦位於相同的子網中，或是在 [**網路和共用中心**] 中，工作組伺服器的網路設定檔設定為 [**私人**]，請移至下一個步驟。

    如果它們不在相同的子網中，或如果工作組伺服器的網路設定檔未設定為 [**私人**]，請在工作組伺服器上，變更 [windows 防火牆] 中的 [輸入**Windows 遠端系統管理 (]) **設定，以明確地允許來自遠端電腦的連線，方法是在設定的 [內容] 對話方塊的 [**電腦**] 索引標籤上新增電腦名稱稱。 **Properties**

3.  > [!IMPORTANT]
    > 執行這個步驟中的 Cmdlet，會覆寫使用者帳戶控制 (UAC) 測量，除非內建的 Administrator 或 System 帳戶正在執行處理序，否則可防止提高權限的處理序在工作群組電腦上執行。 這個 Cmdlet 讓 Administrators 群組成員能夠在未使用內建系統管理員身分登入時管理工作群組伺服器。 允許其他使用者管理工作群組伺服器會降低它的安全性；不過，這會比提供內建的 Administrator 帳戶認證來得安全，因為可能會有多人正在管理該工作群組伺服器。

    若要覆寫在工作群組電腦上執行提高權限的處理序的 UAC 限制，請執行下列 Cmdlet，在工作群組伺服器上建立名為 **LocalAccountTokenFilterPolicy** 的登錄項。

    ```
    New-ItemProperty -Name LocalAccountTokenFilterPolicy -path HKLM:\SOFTWARE\Microsoft\Windows\Currentversion\Policies\System -propertytype DWord -value 1
    ```

4.  在您執行伺服器管理員的電腦上，開啟 **\[所有伺服器\]** 頁面。

5.  如果正在執行伺服器管理員的電腦與目標工作群組伺服器是在同一個工作群組中，請略過最後一個步驟。 如果這兩部電腦不在相同的工作群組中，請以滑鼠右鍵按一下 [伺服器]**** 磚中的目標工作群組伺服器，然後按一下 [管理身分]****。

6.  使用工作群組伺服器的內建 Administrator 帳戶，登入工作群組伺服器。

7.  重新整理 **\[所有伺服器\]** 頁面，再檢視工作群組伺服器的管理性狀態，藉以確認伺服器管理員可以連線至工作群組伺服器並從中收集資料。

##### <a name="to-add-remote-servers-when-server-manager-is-running-on-a-workgroup-computer"></a>當伺服器管理員在工作群組電腦上執行時新增遠端伺服器

1.  在執行伺服器管理員的電腦上，將遠端伺服器新增至 Windows PowerShell 工作階段中本機電腦的 **\[TrustedHosts\]** 清單。 若要將電腦新增到現有的信任主機清單，請在命令中加入 `Concatenate` 參數。 例如，若要將 `Server01` 電腦新增到現有的信任主機清單，請使用下列命令。

    ```
    Set-Item wsman:\localhost\Client\TrustedHosts Server01 -Concatenate -force
    ```

2.  判斷您要管理的伺服器是否位於與您正在執行伺服器管理員的工作群組電腦相同的子網路中。

    如果這兩部電腦位於相同的子網路，或是已在 **\[網路和共用中心\]** 將工作群組伺服器的網路設定檔設定為 **\[私人\]**，請移至下一個步驟。

    如果不在相同的子網路中，或是並未在伺服器管理員執行的工作群組電腦上將工作群組電腦的網路設定檔設定為 **\[私人\]**，則可在 Windows 防火牆中變更連入的 **\[Windows 遠端管理 (HTTP-In)\]** 設定，透過在設定的 **\[內容\]** 對話方塊的 **\[電腦\]** 索引標籤上新增電腦名稱，明確地允許從遠端電腦連線。

3.  在您執行伺服器管理員的電腦上，開啟 **\[所有伺服器\]** 頁面。

4.  重新整理 **\[所有伺服器\]** 頁面，再檢視遠端伺服器的管理性狀態，藉以確認伺服器管理員可以連線至遠端伺服器並從中收集資料。 如果 [伺服器]**** 磚仍會顯示遠端伺服器的管理性錯誤，請移至下一個步驟。

5.  登出您正在執行伺服器管理員的電腦，然後使用內建的 Administrator 帳戶重新登入。 重複執行上述步驟，確認伺服器管理員可以連線至遠端伺服器並從中收集資料。

如果您已遵循本節中的程式，但在管理工作組電腦或從工作組電腦中管理其他電腦時仍繼續發生問題，請參閱 Microsoft 網站上的[about_remote_Troubleshooting](/previous-versions/dd347642(v=technet.10)) 。

### <a name="add-and-manage-servers-in-clusters"></a>在叢集中新增和管理伺服器
您可以使用伺服器管理員來管理容錯移轉叢集 (也稱為伺服器叢集或 MSCS) 中的伺服器。 容錯移轉叢集中的伺服器 (不論是實體或虛擬叢集節點) 在伺服器管理員中有一些獨特的行為和管理限制。

-   將叢集中的一部伺服器新增至伺服器管理員時，叢集中的實體和虛擬伺服器都會自動新增至伺服器管理員。 同樣地，當您從伺服器管理員移除叢集中的伺服器，系統會提示您移除叢集中的其他伺服器。

-   伺服器管理員不會顯示叢集化虛擬伺服器的資料，因為資料是動態的，並且與裝載虛擬叢集節點之伺服器的資料完全相同。 您可以選取裝載該虛擬伺服器的伺服器以檢視其資料。

-   如果您使用伺服器的虛擬叢集物件名稱，將該伺服器新增至伺服器管理員，則在伺服器管理員中顯示的是虛擬物件名稱，而不是預期的實體伺服器名稱。

-   您無法在叢集中的虛擬伺服器上安裝角色和功能。

## <a name="see-also"></a>另請參閱
[伺服器管理員](server-manager.md) 
[建立和管理伺服器群組](create-and-manage-server-groups.md)