---
title: robocopy
description: Robocopy 命令的參考文章，此命令會將檔案資料從某個位置複製到另一個位置。
ms.topic: reference
ms.assetid: d4c6e8e9-fcb3-4a4a-9d04-2d8c367b6354
author: jasongerend
ms.author: jgerend
manager: lizapo
ms.date: 06/07/2020
ms.openlocfilehash: 23d2742d7afeba630c11545cefa3696da05fbcc6
ms.sourcegitcommit: 7c0794e257f602bd71af5eb9a11b8a03d2b9adfd
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/14/2020
ms.locfileid: "97390256"
---
# <a name="robocopy"></a>robocopy

將檔案資料從某個位置複製到另一個位置。

## <a name="syntax"></a>語法

```
robocopy <source> <destination> [<file>[ ...]] [<options>]
```

例如，若要將名為 *yearly-report* 的檔案從 *c:\reports* 複製到檔案共用 *\\ marketing\videos* ，同時啟用多執行緒處理以提供更高的效能 (使用 **/mt** 參數) 並且能夠在使用 **/z** 參數) 中斷 (的情況下重新開機傳輸，請輸入：

```dos
robocopy c:\reports '\\marketing\videos' yearly-report.mov /mt /z
```

### <a name="parameters"></a>參數

| 參數 | 描述 |
|--|--|
| `<source>` | 指定來源目錄的路徑。 |
| `<destination>` | 指定目的地目錄的路徑。 |
| `<file>` | 指定要複製的檔案。 支援 (**&#42;** 或 **？**) 的萬用字元。 如果您未指定此參數， `*.*` 則會使用做為預設值。 |
| `<options>` | 指定要搭配 **robocopy** 命令使用的 **選項，包括****複製**、檔案、**重試**、**記錄** 和 **工作** 選項。 |

#### <a name="copy-options"></a>複製選項

| 選項 | 描述 |
|--|--|
| /s | 複製子目錄。 此選項會自動排除空白目錄。 |
| /e | 複製子目錄。 此選項會自動包含空的目錄。 |
| /lev:`<n>` | 只複製來原始目錄樹狀結構的前 *n* 個層級。 |
| /z | 以可重新開機的模式複製檔案。 |
| /b | 以備份模式複製檔案。 |
| /zb | 使用可重新開機模式。 如果存取遭拒，此選項會使用備份模式。 |
| /efsraw | 以 EFS RAW 模式複製所有加密的檔案。 |
| /copy`<copyflags>` | 指定要複製的檔案屬性。 此選項的有效值為：<ul><li>**D** -資料</li><li>**A** -Attributes</li><li>**T** 時間戳記</li><li>**S** -NTFS 存取控制清單 (ACL) </li><li>**O** -擁有者資訊</li><li>**U** -審核資訊</li></ul>此選項的預設值為 [ **DAT** (資料、屬性和時間戳記) 。 |
| /dcopy:`<copyflags>`| 指定要複製到目錄中的內容。 此選項的有效值為：<ul><li>**D** -資料</li><li>**A** -Attributes</li><li>**T** 時間戳記</li></ul>此選項的預設值為 **DA** (資料和屬性) 。 |
| /秒 | 將具有安全性 (的檔案複製到 **/copy： dat**) 。 |
| /copyall | 複製所有檔案資訊 (等同于 **/copy： DATSOU**) 。 |
| /nocopy | 不復制任何檔案資訊 (適用于 **/purge**) 。 |
| /secfix | 修正所有檔案的檔案安全性，甚至略過檔案。 |
| /timfix | 修正所有檔案的檔案時間，甚至略過檔案。 |
| /purge | 刪除來源中不再存在的目的地檔案和目錄。 使用這個選項搭配 **/e** 選項和目的地目錄，可允許不覆寫目的地目錄安全性設定。 |
| /mir | 鏡像目錄樹狀結構 (相當於 **/e** plus **/purge**) 。 使用這個選項搭配 **/e** 選項和目的地目錄，會覆寫目的地目錄安全性設定。 |
| /mov | 移動檔案，並在複製後從來源刪除它們。 |
| /move | 移動檔案和目錄，並在複製後從來源刪除它們。 |
| /a +： [RASHCNET] | 將指定的屬性加入至複製的檔案。  此選項的有效值為： <ul><li>**R** -唯讀</li><li>封存</li><li>**S** -系統</li><li>**H** -隱藏</li><li>**C** -壓縮</li><li>**N** -未編制內容索引</li><li>**電子** 加密</li><li>**T** -暫存</li></ul> |
| /a-： [RASHCNET] | 從複製的檔案中移除指定的屬性。 此選項的有效值為： <ul><li>**R** -唯讀</li><li>封存</li><li>**S** -系統</li><li>**H** -隱藏</li><li>**C** -壓縮</li><li>**N** -未編制內容索引</li><li>**電子** 加密</li><li>**T** -暫存</li></ul> |
| /create | 只建立樹狀目錄和長度為零的檔案。 |
| /fat | 只使用8.3 字元長度的 FAT 檔案名來建立目的地檔案。 |
| /256 | 關閉路徑超過256個字元的支援。 |
| 族`<n>` | 會監視來源，並在偵測到超過 *n* 個變更時重新執行。 |
| /mot:`<m>` | 監視來源，並在偵測到變更時，于 *m* 分鐘內再次執行。 |
| /MT`[:n]` | 使用 *n* 個執行緒建立多執行緒複製。 *n* 必須是介於1到128之間的整數。 *N* 的預設值為8。 為了達到較佳的效能，請使用 **/log** 選項來重新導向您的輸出。<p>**/Mt** 參數無法搭配 **/ipg** 和 **/efsraw** 參數使用。 |
| /rh： hhmm-hhmm | 指定新複本可能啟動的執行時間。 |
| /pf | 檢查每個檔案的執行時間 (不會) 基礎。 |
| /ipg： n | 指定可在較慢線上釋放頻寬的封包間間距。 |
| /sl | 請勿遵循符號連結，而是建立連結的複本。 |

> [!IMPORTANT]
> 使用 [ **/secfix** 複製] 選項時，請使用下列其中一個其他複製選項來指定您要複製的安全性資訊類型：
>
>- **/copyall**
>- **/copy： o**
>- **/copy： s**
>- **/copy： u**
>- **/sec**

#### <a name="file-selection-options"></a>檔案選取選項

| 選項 | 描述 |
|--|--|
| /a | 只複製已設定 Archive 屬性的 **檔案** 。 |
| /m | 只會複製已設定 **archive** 屬性的檔案，並重設封存 **屬性。** |
| ia`[RASHCNETO]` | 只包含已設定任何指定屬性的檔案。  此選項的有效值為： <ul><li>**R** -唯讀</li><li>封存</li><li>**S** -系統</li><li>**H** -隱藏</li><li>**C** -壓縮</li><li>**N** -未編制內容索引</li><li>**電子** 加密</li><li>**T** -暫存</li><li>**O** -離線</li></ul> |
| xa`[RASHCNETO]` | 排除已設定任何指定屬性的檔案。 此選項的有效值為： <ul><li>**R** -唯讀</li><li>封存</li><li>**S** -系統</li><li>**H** -隱藏</li><li>**C** -壓縮</li><li>**N** -未編制內容索引</li><li>**電子** 加密</li><li>**T** -暫存</li><li>**O** -離線</li></ul> |
| /xf `<filename>[ ...]` | 排除符合指定名稱或路徑的檔案。 支援萬用字元 (**&#42;** 和 **？**) 。 |
| /xd `<directory>[ ...]` | 排除符合指定名稱和路徑的目錄。 |
| /xc | 排除變更的檔案。 |
| /xn | 排除較新的檔案。 |
| /xo | 排除較舊的檔案。 |
| /xx | 排除額外的檔案和目錄。 |
| /xl | 排除「孤立的」檔案和目錄。 |
| /is | 包含相同的檔案。 |
| /it | 包含已修改的檔案。 |
| 達到`<n>` | 指定最大檔案大小 (，以排除大於 *n* 個位元組) 的檔案。 |
| 化`<n>` | 指定要排除小於 *n* 個位元組之檔案的最小檔案大小 () 。 |
| maxage`<n>` | 指定最大檔案存留期 (，以排除早于 *n* 天或日期) 的檔案。 |
| >minage`<n>` | 指定最小檔案使用期限 (排除比 *n* 天或日期) 新的檔案。 |
| /maxlad:`<n>` | 指定上次存取日期的最大值 (排除自 *n*) 之後未使用的檔案。 |
| /minlad:`<n>` | 指定上次存取日期的最小值 (排除 n *) n* 小於 *1900 時所* 使用的檔案， *n* 指定天數。 否則， *n* 會以 YYYYMMDD 格式來指定日期。 |
| /xj | 排除在預設情況下會包含的連接點。 |
| /fft | 假設 FAT 檔案時間 (兩秒精確度)。 |
| /dst | 補償一小時的 DST 時間差異。 |
| /xjd | 排除目錄的連接點。 |
| /xjf | 排除檔案的連接點。 |

#### <a name="retry-options"></a>重試選項

| 選項 | 描述 |
|--|--|
| /r:`<n>` | 指定失敗複製的重試次數。 *N* 的預設值為 1000000 (1000000 重試) 。 |
| /w:`<n>` | 指定重試之間的等待時間 (以秒為單位)。 *N* 的預設值是 30 (等候時間30秒) 。 |
| /reg | 將 **/r** 和 **/w** 選項中指定的值儲存為登錄中的預設設定。 |
| /tbd | 指定系統將等待定義共用名稱 (重試錯誤 67) 。 |

#### <a name="logging-options"></a>記錄選項

| 選項 | 描述 |
|--|--|
| /l | 指定只列出檔案 (，且不會) 複製、刪除或時間戳記。 |
| /x | 報告所有額外的檔案，而不只是選取的檔案。 |
| /v | 產生詳細資訊輸出，並顯示所有略過的檔案。 |
| /ts | 在輸出中包含來源檔案時間戳記。 |
| /fp | 在輸出中包含檔案的完整路徑名稱。 |
| /bytes | 列印大小，以位元組為單位。 |
| /ns | 指定不記錄檔案大小。 |
| /nc | 指定不記錄檔類別。 |
| /nfl | 指定不會記錄檔案名稱。 |
| /ndl | 指定不會記錄目錄名稱。 |
| /np | 指定將不會顯示複製作業的進度 (到目前為止複製的檔案或目錄數目)。 |
| /eta | 顯示所複製檔案的抵達 (ETA) 的預估時間。 |
| /log`<logfile>` | 將狀態輸出寫入至記錄檔 (覆寫現有記錄檔)。 |
| /log +：`<logfile>` | 將狀態輸出寫入至記錄檔， (將輸出附加至現有的記錄檔) 。 |
| /unicode | 將狀態輸出顯示為 Unicode 文字。 |
| /unilog:`<logfile>` | 將狀態輸出以 Unicode 文字的形式寫入記錄檔， (覆寫現有的記錄檔) 。 |
| /unilog +：`<logfile>` | 將狀態輸出以 Unicode 文字的形式寫入至記錄檔 (將輸出附加至現有的記錄檔) 。 |
| /tee | 將狀態輸出寫入至主控台視窗，以及記錄檔。 |
| /njh | 指定沒有作業標頭。 |
| /njs | 指定沒有作業摘要。 |

#### <a name="job-options"></a>作業選項

| 選項 | 描述 |
|--|--|
| 工作`<jobname>` | 指定參數要衍生自命名的工作檔案。 |
| /save`<jobname>` | 指定要將參數儲存至命名的工作檔案。 |
| /quit | 在處理命令列之後退出 (，以) 查看參數。 |
| /nosd | 指出未指定任何來原始目錄。 |
| /nodd | 指出未指定目的地目錄。 |
| /if | 包含指定的檔案。 |

### <a name="exit-return-codes"></a>Exit (傳回) 碼

| 值 | 描述 |
|--|--|
| 0 | 未複製任何檔案。 未發生任何失敗。 沒有任何檔案不相符。 檔案已存在於目的地目錄中;因此，已略過複製操作。 |
| 1 | 已成功複製所有檔案。 |
| 2 | 目的地目錄中有一些其他檔案不存在於來原始目錄中。 未複製任何檔案。 |
| 3 | 部分檔案已複製。 有其他檔案存在。 未發生任何失敗。 |
| 5 | 部分檔案已複製。 有些檔案不相符。 未發生任何失敗。 |
| 6 | 有其他檔案和檔案不相符。 未複製任何檔案，且未發生任何失敗。 這表示檔案已存在於目的地目錄中。 |
| 7 | 檔案已複製、檔案不相符，且有其他檔案存在。 |
| 8 | 未複製數個檔案。 |

> [!NOTE]
> 任何大於 **8** 的值表示複製作業期間至少有一個失敗。

## <a name="additional-references"></a>其他參考資料

- [命令列語法關鍵](command-line-syntax-key.md)
